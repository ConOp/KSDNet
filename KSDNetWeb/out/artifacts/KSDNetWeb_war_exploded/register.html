<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register</title>
    <script src="./bootstrap/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"></script>
    <script src="./bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
    <h3>Create New Account</h3>
    <form action="/Register" method="post">
        <div class="input-group">
            <table>
                <tr>
                    <td><h4>Are you a Student or a Teacher?</h4></td>
                    <td><label><input name="option" type="radio" onchange="if(this.checked){check_holder(1)}" required>Student</label></td>
                    <td><label><input name="option" type="radio" onchange="if(this.checked){check_holder()}">Teacher</label></td>
                </tr>
                <tr>
                    <td><h4>Enter your name:</h4></td>
                    <td><input name ="uname" placeholder="name" onkeypress="return onlyLetters(event)" type="text" required></td>
                </tr>
                <tr>
                    <td><h4>Enter your surname:</h4></td>
                    <td><input name ="surname" placeholder="surname" onkeypress="return onlyLetters(event)" type="text" required></td>
                </tr>
                <tr>
                    <td><h4>Enter your Username</h4></td>
                    <td><input name ="userid" placeholder=" " type="text" maxlength="6" pattern="^[S|T][0-9][0-9][0-9][0-9][0-9]"
                               title="First character must be S for Students or T for teachers, followed by 5 digits" onchange="check_id()" required></td>
                </tr>
                <tr>
                    <td><h4>Enter your Password</h4></td>
                    <td><input  name ="pass" placeholder="Enter Password" type="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,15}"
                                title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 to 15 characters" required></td>
                </tr>
                <tr>
                    <td><h4>Please reenter your Password</h4></td>
                    <td><input  name ="conpass" placeholder="Enter Password Again" type="password" required></td>
                </tr>
                <tr>
                    <td><h4>Enter email address</h4></td>
                    <td><input name="email" type="email" placeholder="email@example.com" required></td>
                </tr>
            </table>
            <button id="registerButton" onclick="validation()" type="submit">Sign up</button>
        </div>
    </form>
    <form action="index.html">
        <br>
        <button id="BackToLogin" type="submit">Already Have an Account</button>
    </form>
    <script>
        var user_type = "";
        function check_holder(X) {
            if (X == 1){
                document.getElementById("userid").placeholder = "Sxxxxx";
                user_type = "S";
            }else{
                document.getElementById("userid").placeholder = "Txxxxx";
                user_type = "T";
            }
        }
        function onlyLetters(evt)
        {
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode != 46 && charCode > 31
                && (charCode < 48 || charCode > 57))
                return true;
            return false;
        }
        function check_id(){
            var userid = document.getElementById("userid").value;
            if(userid.charAt(0)!= user_type){
                document.getElementById("userid").value = "";
            }
        }
        var pass = document.getElementById("pass");
        var conpass = document.getElementById("conpass");
        function validation()
        {
            if(pass.value != conpass.value) {
                conpass.setCustomValidity("Passwords don't match");
                conpass.value = "";
            } else {
                conpass.setCustomValidity('');
            }


        }
        pass.onchange = validation();
        conpass.onkeyup = validation();
    </script>
</body>
</html>